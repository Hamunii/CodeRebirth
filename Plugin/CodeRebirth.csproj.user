<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="Current" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
   <!-- GENERATED BY SETUP-PROJECT.py -->
   <PropertyGroup>
      <!-- Define fallback directories -->
      <TestDir1>C:\Users\Moh\AppData\Roaming\Thunderstore Mod Manager\DataFolder\LethalCompany\profiles\coderebirth\BepInEx\plugins/</TestDir1>
      <TestDir2>F:\AppData\Thunderstore Mod Manager\DataFolder\LethalCompany\profiles\CodeRebirth\BepInEx\plugins</TestDir2> <!-- Change this to your second choice -->
      <TestDir3>C:\Program Files (x86)\Steam\steamapps\common\Lethal Company\BepInEx\plugins\</TestDir3>
   </PropertyGroup>

   <!-- Determine which directory to use -->
   <PropertyGroup>
      <TestDir Condition="Exists('$(TestDir1)')">$(TestDir1)</TestDir>
      <TestDir Condition="!Exists('$(TestDir)') and Exists('$(TestDir2)')">$(TestDir2)</TestDir>
      <TestDir Condition="!Exists('$(TestDir)') and !Exists('$(TestDir2)') and Exists('$(TestDir3)')">$(TestDir3)</TestDir>
   </PropertyGroup>
   
   <!-- Our mod files get copied over after NetcodePatcher has processed our DLL -->
   <Target Name="CopyToTestProfile" DependsOnTargets="NetcodePatch" AfterTargets="PostBuildEvent">
      <MakeDir
         Directories="$(TestDir)$(AssemblyName)-DEV/"
         Condition="!Exists('$(TestDir)$(AssemblyName)-DEV/')"
      />
      <Copy SourceFiles="$(TargetPath)" DestinationFolder="$(TestDir)$(AssemblyName)-DEV/"/>
      <!-- We will copy the asset bundle named "coderebirthasset" over -->
      <Copy SourceFiles="../UnityProject/AssetBundles/StandaloneWindows/coderebirthasset" DestinationFolder="$(TestDir)$(AssemblyName)-DEV/"/>
      <Exec Command="echo '[csproj.user] Mod files copied to $(TestDir)$(AssemblyName)-DEV/'" />
   </Target>
</Project>